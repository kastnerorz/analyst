<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"> <!-- #409EFF -->
    <link rel="stylesheet" href="../report.css">
    <title>category</title>
</head>
<body>
<div id="app">
    <el-container>
        <el-header style="border-bottom: #409EFF">
            <el-row type="flex" justify="center">
                <el-col :span="12">
                    <el-row :gutter="20">
                        <el-col :span="4">
                            <span style="color:#409EFF;font-size: 30px;height: 40px;">智购</span>
                        </el-col>
                        <el-col :span='inputLength'>
                            <el-input prefix-icon="el-icon-search" placeholder="请输入内容" v-model="keyword" @keyup.native.enter="search" clearable></el-input>
                        </el-col>
                        <el-col :span="2" :offset="6">
                            <el-button type="text">清单</el-button>
                        </el-col>
                        <el-col :span="2">
                            <el-button type="text">排行</el-button>
                        </el-col>
                    </el-row>
                </el-col>
            </el-row>
        </el-header>

        <el-main>
            <el-row type="flex" class="borderBottom">
                <el-col :span="24" style="padding-bottom:10px;">
                    <span style="font-size:32px;font-weight: bold;color:rgba(0,0,0,0.95);">{{ category }}品类导购报告 &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #409EFF; font-size: 18px"> 生成时间： {{ time }}</span> </span>
                </el-col>
            </el-row>
            <el-row type="flex">
                <el-col :span="15" class="borderRight borderBottom" justify="center" style="height:350px">
                    <div class="header">
                        <span>市场占比</span>
                    </div>
                    <div id="topTenBrand" style="width:100%;height:300px;">
                    </div>
                </el-col>
                <el-col :span="9" class="borderBottom" justify="center" style="height:350px">
                    <div id="attention" style="width:100%;height:300px;">
                    </div>
                </el-col>
            </el-row>
            <el-row type="flex">
                <el-col :span="10" class="borderBottom borderRight" justify="center" style="height:450px">
                    <div class="header">
                        <span>品牌的平均价格</span>
                    </div>
                    <div id="average" style="width:100%;height:400px;">
                    </div>
                </el-col>
                <el-col :span="7" class="borderBottom borderRight" justify="center" style="height:450px">
                    <div class="header">
                        <span>品牌的商品种类数</span>
                    </div>
                    <div id="saleNumber" style="width:100%;height:400px;">
                    </div>
                </el-col>
                <el-col :span="7" class="borderBottom height-fixed" justify="center"style="height:450px;padding-left: 20px;">
                    <div id="hot" style="width:100%;height:400px;">
                    </div>
                </el-col>
            </el-row>
            <el-row type="flex">
                <el-col :span="15" class=" borderBottom borderRight height-fixed" justify="center" style="height:350px">
                    <div class="header">
                        <span>按价格区分{{ category }}类别下的商品数</span>
                    </div>
                    <div id="priceChart" style="width:90%;height:300px;">
                    </div>
                </el-col>
                <el-col :span="9" class=" borderBottom borderRight height-fixed" justify="center" style="height:350px">
                    <div class="header">
                        <span>不同价格的销量</span>
                    </div>
                    <div id="saleMostPrice" style="width:90%;height:300px;">
                    </div>
                </el-col>

            </el-row>
        </el-main>
        <el-footer></el-footer>
    </el-container>
</div>
</body>
<!-- import axios -->
<script src="https://unpkg.com/axios/dist/axios.js"></script>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<!-- import ECharts -->
<script src="https://cdn.bootcss.com/echarts/4.1.0.rc2/echarts.js"></script>
<script src="http://data-visual.cn/datav/src/js/echarts/extension/echarts-wordcloud.min.js"></script>
<script th:inline="none">
    let app = new Vue({
        el: '#app',
        data: function() {
            return {
                inputLength: 10,
                headerInputShow: true,
                headerButtonShow: true,
                keyword: '',
                category: '手机'
            }
        },
        methods: {
            getTime () {
                let now= new Date();
                let year=now.getFullYear();
                let month=now.getMonth() +  1;
                let date=now.getDate();
                return year + "年" + month + "月" + date + "日";
            }
        },
        computed:{
            time() {
                return this.getTime()
            }
        }
    })

    // 关键词
    let attention = echarts.init(document.getElementById('attention'));
    attentionOption = {
        title:{
            // text:"搜索关键词热度 ",
            // link:'https://github.com/ecomfe/echarts-wordcloud',
            // subtext: 'data-visual.cn',
            // sublink:'http://data-visual.cn',
        },
        tooltip: {},
        series: [{
            type: 'wordCloud',
            gridSize: 30,
            sizeRange: [12, 50],
            rotationRange: [0, 0],
            shape: 'rectangle',
            textStyle: {
                normal: {
                    color: function() {
                        return '#409EFF'
                        // return 'rgb(' + [
                        //     Math.round(50+Math.random() * 40),
                        //     Math.round(138+Math.random() * 60),
                        //     Math.round(235+Math.random() * 60)
                        // ].join(',') + ')';
                    }
                },
                emphasis: {
                    shadowBlur: 10,
                    shadowColor: '#999'
                }
            },
            data: [{
                name: '手机',
                value: 10000,
                textStyle: {
                    normal: {
                        color: '#0054b6'
                    },
                    emphasis: {
                        color: '#409EFF'
                    }
                }
            }, {
                name: '全网通',
                value: 6181
            }, {
                name: '双卡',
                value: 4386
            }, {
                name: '64GB',
                value: 4055
            }, {
                name: '4G',
                value: 2467
            }, {
                name: '小米',
                value: 2244
            }, {
                name: '苹果',
                value: 2244
            }, {
                name: '华为',
                value: 2244
            }, {
                name: '电信',
                value: 1112
            }, {
                name: '移动',
                value: 965
            }, {
                name: '联通',
                value: 847
            }, {
                name: '金色',
                value: 582
            }, {
                name: '学生',
                value: 555
            }, {
                name: '老人机',
                value: 550
            }, {
                name: '32GB',
                value: 462
            }, {
                name: '双摄',
                value: 366
            }, {
                name: '指纹',
                value: 360
            }]
        }]
    };
    attention.setOption(attentionOption);

    // 关键词热度
    let hot = echarts.init(document.getElementById('hot'));

    let myData = ['全网通', '双卡', '64GB']
    let lineData = [100, 100, 100]
    let thisYearData = {
        1: [77, 66, 55]
    }
    let a = [[1, 1]]
    let timeLineData = [1]
    let background = "rgba(0,0,0,0)"; // 背景
    let option = {
        baseOption: {
            backgroundColor: background,
            timeline: {
                show: false,
                top: 0,
                data: []
            },
            legend : {
                top : '5%',
                left : '51%',
                itemWidth : 30,
                itemHeight : 22,
                itemGap: 300,
                icon : 'horizontal',
                textStyle : {
                    color : '#999',
                    fontSize : 20,
                },
                data: ['']
            },
            grid: [{
                show: false,
                left: '5%',
                top: '10%',
                bottom: '8%',
                containLabel: true,
                width: '37%'
            }, {
                show: false,
                left: '10%',
                top: '10%',
                bottom: '8%',
                width: '0%'
            }, {
                show: false,
                left: '20%',
                top: '10%',
                bottom: '8%',
                containLabel: true,
                width: '50%'
            }],
            xAxis: [{
                type: 'value',
                inverse: true,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                position: 'top',
                axisLabel: {
                    show: false
                },
                splitLine: {
                    show: false
                }
            }, {
                gridIndex: 1,
                show: false
            }, {
                gridIndex: 2,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                position: 'top',
                axisLabel: {
                    show: false
                },
                splitLine: {
                    show: false
                }
            }],
            yAxis: [{
                type: 'category',
                inverse: true,
                position: 'right',
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    show: false
                },
                data: myData
            }, {
                gridIndex: 1,
                type: 'category',
                inverse: true,
                position: 'left',
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: 'rgba(0,0,0,0.95)',
                        fontSize: 20
                    }

                },
                data: myData.map(function(value) {
                    return {
                        value: value,
                        textStyle: {
                            align: 'center'
                        }
                    }
                })
            }, {
                gridIndex: 2,
                type: 'category',
                inverse: true,
                position: 'left',
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    show: false

                },
                data: myData
            }],
            series: []

        },
        options: []
    };
    option.baseOption.timeline.data.push(timeLineData[0]);
    option.options.push({
        series: [
            {
                type: 'pictorialBar',
                xAxisIndex: 2,
                yAxisIndex: 2,
                symbol: 'rect',
                itemStyle: {
                    normal: {
                        color: 'rgba(64,158,255,0.27)'
                    }
                },
                barWidth: 10,
                symbolRepeat: true,
                symbolSize: 14,
                data: lineData,
                barGap: '-100%',
                barCategoryGap: 0,
                label: {
                    normal: {
                        show: false,
                        formatter: (series) => {
                            return thisYearData[timeLineData[0]][series.dataIndex] + '%'
                        },
                        position: 'insideTopRight',
                        textStyle:{
                            color: 'rgba(0,0,0,0.95)',
                            fontSize: 20,
                        },
                        offset: [0, -15],
                    }
                },
                z: -100,
                animationEasing: 'elasticOut',
                animationDelay: function (dataIndex, params) {
                    return params.index * 30;
                }
            }, {
                name: '2018',
                type: 'pictorialBar',
                xAxisIndex: 2,
                yAxisIndex: 2,
                symbol: 'rect',
                barWidth: 10,
                itemStyle: {
                    normal: {
                        barBorderRadius: 5,
                        color: '#409eff'
                    }
                },
                symbolRepeat: true,
                symbolSize: 14,
                data: thisYearData[timeLineData[0]],
                animationEasing: 'elasticOut',
                animationDelay: function (dataIndex, params) {
                    return params.index * 30 * 1.1;
                }
            }
        ]
    });
    hot.setOption(option);


    // 销量前十品牌
    let topTenBrand = echarts.init(document.getElementById('topTenBrand'));
    let dataAxis = ['小米', '华为', 'Apple', 'Vivo', '锤子', '一加', '魅族', 'Oppo', 'HTC', '索尼'];
    // let data = ''
    // axios({
    //     url: '',
    //     method: 'POST',
    //     params:{
    //         category: ''
    //     }
    //         .then(res => {
    //             data = res.data.data
    //     })
    // })
    let data = [5200000, 1820000, 1910000, 2340000, 2900000, 3300000, 310000, 123000, 442000, 321000];
    let yMax = 6000000;
    let dataShadow = [];
    for (let i = 0; i < data.length; i++) {
        dataShadow.push(yMax);
    }
    let topTenBrandOption = {
        // title: {
        //     text: '',
        //     subtext: ''
        // },
        xAxis: {
            data: dataAxis,
            axisLabel: {
                inside: true,
                textStyle: {
                    color: '#fff'
                }
            },
            axisTick: {
                show: false
            },
            axisLine: {
                show: false
            },
            z: 10
        },
        yAxis: {
            axisLine: {
                show: false
            },
            axisTick: {
                show: false
            },
            axisLabel: {
                textStyle: {
                    color: '#999'
                }
            }
        },
        dataZoom: [
            {
                type: 'inside'
            }
        ],
        series: [
            { // For shadow
                type: 'bar',
                itemStyle: {
                    normal: {color: 'rgba(0,0,0,0.0)'}
                },
                barGap:'-100%',
                barCategoryGap:'40%',
                data: dataShadow,
                animation: false
            },
            {
                type: 'bar',
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(
                            0, 0, 0.6, 1,
                            [
                                {offset: 0, color: '#409EFF'},
                                {offset: 0.5, color: '#188df0'},
                                {offset: 1, color: '#354eb0'}
                            ]
                        )
                    },
                    emphasis: {
                        color: new echarts.graphic.LinearGradient(
                            0, 0, 0, 1,
                            [
                                {offset: 0, color: '#409EFF'},
                                {offset: 0.7, color: '#409EFF'},
                                {offset: 1, color: '#409EFF'}
                            ]
                        )
                    }
                },
                data: data
            }
        ]
    };
    let zoomSize = 6;
    topTenBrand.on('click', function (params) {
        console.log(dataAxis[Math.max(params.dataIndex - zoomSize / 2, 0)]);
        topTenBrand.dispatchAction({
            type: 'dataZoom',
            startValue: dataAxis[Math.max(params.dataIndex - zoomSize / 2, 0)],
            endValue: dataAxis[Math.min(params.dataIndex + zoomSize / 2, data.length - 1)]
        });
    });
    topTenBrand.setOption(topTenBrandOption);
    // Enable data zoom when user click bar.

    let saleNumber = echarts.init(document.getElementById('saleNumber'));
    numberOption = {
        title : {
            // text: '商品种类数目',
            // subtext: '纯属虚构',
            // x:'center'
        },
        tooltip : {
            trigger: 'item',
            // formatter: "{a} <br/>{b} : {c} ({d}%)",
        },
        legend: {
            x : 'left',
            y : 'bottom',
            data: dataAxis
        },
        toolbox: {
            show : false,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {
                    show: true,
                    type: ['pie', 'funnel']
                },
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : false,
        series : [
            {
                name:'面积模式',
                type:'pie',
                radius : [30, 110],
                center : ['50%', '50%'],
                roseType : 'area',
                data:[
                    {value:7, name:'小米'},
                    {value:5, name:'Apple'},
                    {value:15, name:'华为'},
                    {value:25, name:'Oppo'},
                    {value:20, name:'Vivo'},
                    {value:35, name:'魅族'},
                    {value:30, name:'锤子'},
                    {value:40, name:'一加'},
                    {value:30, name:'HTC'},
                    {value:40, name:'索尼'}
                ]
            }
        ]
    };
    saleNumber.setOption(numberOption);

    let average = echarts.init(document.getElementById('average'));
    var pathSymbols = {
        reindeer: 'path://M-22.788,24.521c2.08-0.986,3.611-3.905,4.984-5.892 c-2.686,2.782-5.047,5.884-9.102,7.312c-0.992,0.005-0.25-2.016,0.34-2.362l1.852-0.41c0.564-0.218,0.785-0.842,0.902-1.347 c2.133-0.727,4.91-4.129,6.031-6.194c1.748-0.7,4.443-0.679,5.734-2.293c1.176-1.468,0.393-3.992,1.215-6.557 c0.24-0.754,0.574-1.581,1.008-2.293c-0.611,0.011-1.348-0.061-1.959-0.608c-1.391-1.245-0.785-2.086-1.297-3.313 c1.684,0.744,2.5,2.584,4.426,2.586C-8.46,3.012-8.255,2.901-8.04,2.824c6.031-1.952,15.182-0.165,19.498-3.937 c1.15-3.933-1.24-9.846-1.229-9.938c0.008-0.062-1.314-0.004-1.803-0.258c-1.119-0.771-6.531-3.75-0.17-3.33 c0.314-0.045,0.943,0.259,1.439,0.435c-0.289-1.694-0.92-0.144-3.311-1.946c0,0-1.1-0.855-1.764-1.98 c-0.836-1.09-2.01-2.825-2.992-4.031c-1.523-2.476,1.367,0.709,1.816,1.108c1.768,1.704,1.844,3.281,3.232,3.983 c0.195,0.203,1.453,0.164,0.926-0.468c-0.525-0.632-1.367-1.278-1.775-2.341c-0.293-0.703-1.311-2.326-1.566-2.711 c-0.256-0.384-0.959-1.718-1.67-2.351c-1.047-1.187-0.268-0.902,0.521-0.07c0.789,0.834,1.537,1.821,1.672,2.023 c0.135,0.203,1.584,2.521,1.725,2.387c0.102-0.259-0.035-0.428-0.158-0.852c-0.125-0.423-0.912-2.032-0.961-2.083 c-0.357-0.852-0.566-1.908-0.598-3.333c0.4-2.375,0.648-2.486,0.549-0.705c0.014,1.143,0.031,2.215,0.602,3.247 c0.807,1.496,1.764,4.064,1.836,4.474c0.561,3.176,2.904,1.749,2.281-0.126c-0.068-0.446-0.109-2.014-0.287-2.862 c-0.18-0.849-0.219-1.688-0.113-3.056c0.066-1.389,0.232-2.055,0.277-2.299c0.285-1.023,0.4-1.088,0.408,0.135 c-0.059,0.399-0.131,1.687-0.125,2.655c0.064,0.642-0.043,1.768,0.172,2.486c0.654,1.928-0.027,3.496,1,3.514 c1.805-0.424,2.428-1.218,2.428-2.346c-0.086-0.704-0.121-0.843-0.031-1.193c0.221-0.568,0.359-0.67,0.312-0.076 c-0.055,0.287,0.031,0.533,0.082,0.794c0.264,1.197,0.912,0.114,1.283-0.782c0.15-0.238,0.539-2.154,0.545-2.522 c-0.023-0.617,0.285-0.645,0.309,0.01c0.064,0.422-0.248,2.646-0.205,2.334c-0.338,1.24-1.105,3.402-3.379,4.712 c-0.389,0.12-1.186,1.286-3.328,2.178c0,0,1.729,0.321,3.156,0.246c1.102-0.19,3.707-0.027,4.654,0.269 c1.752,0.494,1.531-0.053,4.084,0.164c2.26-0.4,2.154,2.391-1.496,3.68c-2.549,1.405-3.107,1.475-2.293,2.984 c3.484,7.906,2.865,13.183,2.193,16.466c2.41,0.271,5.732-0.62,7.301,0.725c0.506,0.333,0.648,1.866-0.457,2.86 c-4.105,2.745-9.283,7.022-13.904,7.662c-0.977-0.194,0.156-2.025,0.803-2.247l1.898-0.03c0.596-0.101,0.936-0.669,1.152-1.139 c3.16-0.404,5.045-3.775,8.246-4.818c-4.035-0.718-9.588,3.981-12.162,1.051c-5.043,1.423-11.449,1.84-15.895,1.111 c-3.105,2.687-7.934,4.021-12.115,5.866c-3.271,3.511-5.188,8.086-9.967,10.414c-0.986,0.119-0.48-1.974,0.066-2.385l1.795-0.618 C-22.995,25.682-22.849,25.035-22.788,24.521z',
    };

    var labelSetting = {
        normal: {
            show: true,
            position: 'right',
            offset: [10, 0],
            textStyle: {
                fontSize: 20
            }
        }
    };


    averageOption = {
        // title: {
        //     text: 'Vehicles in X City'
        // },
        // legend: {
        //     data: ['2015']
        // },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            containLabel: true,
            left: 20
        },
        yAxis: {
            data: ['小米', '苹果', '华为', 'Vivo', 'OPPO'],
            inverse: true,
            axisLine: {show: false},
            axisTick: {show: false},
            axisLabel: {
                margin: 30,
                textStyle: {
                    fontSize: 14
                }
            }
        },
        xAxis: {
            splitLine: {show: false},
            axisLabel: {show: false},
            axisTick: {show: false},
            axisLine: {show: false}
        },
        series: [{
            name: '2015',
            type: 'pictorialBar',
            label: labelSetting,
            symbolRepeat: true,
            symbolSize: ['80%', '60%'],
            barCategoryGap: '40%',
            data: [{
                value: 1900,
                symbol: pathSymbols.reindeer
            },{
                value: 4500,
                symbol: pathSymbols.reindeer
            },{
                value: 2500,
                symbol: pathSymbols.reindeer
            },{
                value: 3000,
                symbol: pathSymbols.reindeer
            },{
                value: 2800,
                symbol: pathSymbols.reindeer
            }]
        }]
    };
    average.setOption(averageOption);

    let priceChart = echarts.init(document.getElementById('priceChart'));
    let hours = ['1000以下', '1000-2000', '2000-3000', '3000-4000', '4000-5000', '5000-6000', '6000-7000','7000+'];
    let days = ['数目'];
    let priceData = [[0,0,5],[0,1,10],[0,2,9],[0,3,6],[0,4,4],[0,5,8],[0,6,1],[0,7,7]]
    priceData = priceData.map(function (item) {
        return [item[1], item[0], item[2]];
    });
    priceChartOption = {
        // title: {
        //     text: ''
        // },
        legend: {
            data: ['number'],
            left: 'right'
        },
        tooltip: {
            position: 'top',
            formatter: function (params) {
                return params.value[2];
            }
        },
        grid: {
            left: 10,
            bottom: 20,
            right: 25,
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: hours,
            boundaryGap: false,
            splitLine: {
                show: false,
                lineStyle: {
                    color: '#fff',
                    type: 'dashed'
                }
            },
            axisLine: {
                show: false
            }
        },
        yAxis: {
            type: 'category',
            data: days,
            axisLine: {
                Chartshow: false
            }
        },
        series: [{
            name: 'Punch Card',
            type: 'scatter',
            symbolSize: function (val) {
                return val[2] * 3;
            },
            data: priceData,
            animationDelay: function (idx) {
                return idx * 5;
            }
        }]
    };
    priceChart.setOption(priceChartOption);

    let saleMostPrice = echarts.init(document.getElementById('saleMostPrice'));
    saleMostPriceOption = {
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        series: [{
            name: '库存情况',
            type: 'pie',
            radius: '68%',
            center: ['50%', '50%'],
            clockwise: false,
            data: [{
                value: 30,
                name: '小米'
            }, {
                value: 25,
                name: '苹果'
            }, {
                value: 28,
                name: '华为'
            }, {
                value: 18,
                name: 'Vivo'
            }, {
                value: 7,
                name: 'OPPO'
            }],
            label: {
                normal: {
                    textStyle: {
                        color: '#999',
                        fontSize: 14,
                    }
                }
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            itemStyle: {
                normal: {
                    borderWidth: 4,
                    borderColor: '#ffffff',
                },
                emphasis: {
                    borderWidth: 0,
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }],
        color: [
            '#57656F',
            '#B9A3AB',
            '#c1883a',
            '#7d9e85',
            '#9cc5b0',
            '#c9856b',
            '#6f9fa7',
            '#334553'
        ],
        backgroundColor: '#fff'
    };
    saleMostPrice.setOption(saleMostPriceOption);
</script>
</html>